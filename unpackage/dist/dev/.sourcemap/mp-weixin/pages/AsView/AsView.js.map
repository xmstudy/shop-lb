{"version":3,"sources":["webpack:///F:/UniApp/products/shopping-projects/shopping_25_07/pages/AsView/AsView.vue?15bc","webpack:///F:/UniApp/products/shopping-projects/shopping_25_07/pages/AsView/AsView.vue?2ab3","webpack:///F:/UniApp/products/shopping-projects/shopping_25_07/pages/AsView/AsView.vue?b75d","webpack:///F:/UniApp/products/shopping-projects/shopping_25_07/pages/AsView/AsView.vue?0dd4","uni-app:///pages/AsView/AsView.vue","webpack:///F:/UniApp/products/shopping-projects/shopping_25_07/pages/AsView/AsView.vue?09f6","webpack:///F:/UniApp/products/shopping-projects/shopping_25_07/pages/AsView/AsView.vue?b3cb","uni-app:///main.js"],"names":["data","statusBarHeight","capsuleHeight","capsuleTop","categories","activeIndex","currentGoodsList","goodsLoading","bannerArticle","recommendGoods","showSku","skuActionType","selectedSkuIndex","quantity","productName","currentPrice","originalPrice","skuOptions","spec","productData","productImages","_skuSpecsCache","computed","navInlineStyle","navTotalHeight","contentTopPx","currentGoods","selectedSkuPrice","totalPrice","mounted","methods","tapCat","console","loadCategories","res","firstLevel","id","name","parentId","loadGoodsByCategory","params","pageSize","pageNo","category2Id","goodsId","title","price","tags","img","isHot","imageLoaded","goToGoodsDetail","uni","url","addToCart","item","icon","duration","onImageLoad","onImageError","loadBannerArticle","pageNum","goToBannerDetail","loadRecommendGoods","isRecommend","processProductData","skus","processProductImages","processSkuOptions","specConfig","values","selectedValue","specOption","skuId","value","getCachedSkuSpecs","sku","parsedSpecs","clearSkuCache","getSelectedSku","closeSkuSelector","selectSpecValue","getSkuPrice","updateSelectedSku","increaseQuantity","decreaseQuantity","getSkuImage","directAddToCart","goodsNum","confirmSkuAction","confirmAddToCart","selectedSku","wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACsC;;;AAG3F;AAC2K;AAC3K,gBAAgB,qLAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnFA;AAAA;AAAA;AAAA;AAA8nB,CAAgB,wpBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACsLlpB;AAKA;AAGA;AAEA;AAAA;AAAA,eAEA;EACAA;IACA;MACA;MACAC;MACAC;MAAA;MACAC;MAAA;;MAEA;MACAC;MACAC;MACA;MACAC;MACAC;MACA;MACAC;MAEA;MACAC;MAEA;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;MACA;MACAC;MACAC;MACAC;IACA;EACA;;EACAC;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IAEA;IACAC;MACA;MACA;QACA;QACA;MACA;MACA;IACA;IAEAC;MACA;IACA;EACA;EACAC;IACA;IACA;IAGA;MACA;MACA;QACA;QACA;MACA;IACA;;IAGA;;IAMA;IACA;IACA;IACA;IACA;IACA;EACA;EACAC;IACAC;MACA;MACAC;MACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAGA;cAAA;gBAAAC;gBACA;kBACA;kBACA;kBACAA;oBACA;sBACAC;wBACA;0BACAC;0BACAC;0BACAC;wBACA;sBACA;oBACA;kBACA;;kBAEA;kBACA;oBACA;oBACA;kBACA;gBACA;kBACA;kBACAN;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAO;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEA;;gBAEA;gBACA;gBACAC;kBACAC;kBACAC;kBACAC;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAT;gBACA;kBACA;oBAAA;sBACAU;sBACAC;sBACAC;sBACA9B;sBACA+B;sBACAC;sBACAC;sBACAC;oBACA;kBAAA;gBACA;kBACA;kBACAlB;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAA;gBACA;gBACA;cAAA;gBAAA;gBAEA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAmB;MACAC;QACAC;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,IAEAC;kBAAA;kBAAA;gBAAA;gBACAvB;gBAAA;cAAA;gBAAA;gBAAA,OAKA;cAAA;gBAAAE;gBACA;kBACAlC;kBACAgC;;kBAEA;kBACA;;kBAEA;kBACA;kBACA;kBACAA;oBACAtB;oBACAI;oBACAG;kBACA;gBACA;kBACAmC;oBACAP;oBACAW;oBACAC;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAzB;gBACAoB;kBACAP;kBACAW;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAC;MACA;QACA;MACA;IACA;IAEA;IACAC;MACA;QACA;QACA;QACA,+CACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEA;gBACApB;kBACAqB;kBACApB;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAP;gBACA;kBACA;kBACA1B;oBAAA;kBAAA;kBACA;oBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAwB;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACA8B;MACA;QACAV;UACAC;QACA;MACA;IACA;IAEA;IACAU;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEA;gBACAvB;kBACAC;kBAAA;kBACAC;kBACAsB;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAA9B;gBACA;kBACA;oBAAA;sBACAU;sBACAC;sBACAC;sBACA9B;sBACAgC;sBACAC;oBACA;kBAAA;gBACA;kBACA;kBACAjB;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAiC;MACAjC;;MAEA;MACA;;MAEA;MACA;MACA;MACA;MACA;;MAEA;MACA,mDACAhC;QACAa;QACAqD;MAAA,EACA;MAEAlC;QACAlB;QACAC;QACAI;MACA;;MAEA;MACA;;MAEA;MACA;IACA;IAEA;IACAgD;MACA;;MAEA;MACA;QACA;UACA;UACA;YACA;cAAA;gBAAAd;cAAA;YAAA;UACA;QACA;UACA;UACA;YAAA;UAAA;UACA;YAAA;cAAAA;YAAA;UAAA;QACA;MACA;;MAEA;MACA;QACA;UAAAA;QAAA;MACA;;MAEA;MACA;QACA;MACA;IACA;IAEA;IACAe;MAAA;MACApC;MACAA;MAEA;QACAA;QACA;MACA;;MAEA;MACA;MAEA;MACA;MAEAA;MACAA;;MAEA;MACA;MACA;QACA;UACAqC;UACArC;QACA;UACAA;UACAqC;QACA;MACA;;MAEA;MACA;QACA;QACA;;QAEA;QACAA;UACArC;UACA;YACAK;YACAiC;YACAC;YAAA;YACAL;UACA;;UAEA;UACAhD;YACAc;YACA;cACA;YACA;YAEAA;YAEA;cACAwC;gBACAC;gBACA3B;gBACAjC;gBACA6D;cACA;YACA;UACA;UAEA;QACA;MACA;;MAEA;MACA;QACA;MACA;MAEA1C;IACA;IAEA;IACA2C;MACA;QACA;UACA;YACA,uCACAC;cACAC;YAAA;UAEA;YACA7C;YACA,uCACA4C;cACAC;YAAA;UAEA;QACA;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;QACA;MACA;;MAEA;MACA;QACA;MACA;;MAEA;MACA;QAAA;MAAA;MAEA;QACA;UACA;UACA;YACA;YACA;UACA;QACA;UACA;QACA;MACA;;MAEA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MAEA;QAAA;MAAA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;QAAA;MAAA;MACA;MAEA;QACA;UACA;YACA;YACA;UACA;QACA;QAEA;UACA;QACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;QACA;MACA;IACA;IAEA;IACAC;MACA;QACA;MACA;MACA;IACA;IAEA;IACAC;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEA;gBACA/C;kBACAiC;kBACAe;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAtD;gBACA;kBACAkB;oBACAP;oBACAW;oBACAC;kBACA;gBACA;kBACAL;oBACAP;oBACAW;oBACAC;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAzB;gBACAoB;kBACAP;kBACAW;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAgC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAC;gBAAA,IACAA;kBAAA;kBAAA;gBAAA;gBACAvC;kBACAP;kBACAW;kBACAC;gBACA;gBAAA;cAAA;gBAIA;gBACAjB;kBACAiC;kBACAe;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAtD;gBACA;kBACAkB;oBACAP;oBACAW;oBACAC;kBACA;kBACA;gBACA;kBACAL;oBACAP;oBACAW;oBACAC;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAzB;gBACAoB;kBACAP;kBACAW;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACp0BA;AAAA;AAAA;AAAA;AAAytC,CAAgB,+rCAAG,EAAC,C;;;;;;;;;;;ACA7uC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;ACNL;AAGA;AACA;AAHA;AACAmC,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C","file":"pages/AsView/AsView.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./AsView.vue?vue&type=template&id=7bcda5e6&scoped=true&\"\nvar renderjs\nimport script from \"./AsView.vue?vue&type=script&lang=js&\"\nexport * from \"./AsView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AsView.vue?vue&type=style&index=0&id=7bcda5e6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7bcda5e6\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/AsView/AsView.vue\"\nexport default component.exports","export * from \"-!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./AsView.vue?vue&type=template&id=7bcda5e6&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = !_vm.goodsLoading && _vm.currentGoods.length === 0\n  var g1 = _vm.recommendGoods.length\n  var m0 = _vm.showSku ? _vm.getSkuImage() : null\n  var l1 = _vm.showSku\n    ? _vm.__map(_vm.skuOptions.spec, function (spec, specIndex) {\n        var $orig = _vm.__get_orig(spec)\n        var l0 = _vm.__map(spec.values, function (value, valueIndex) {\n          var $orig = _vm.__get_orig(value)\n          var m1 = _vm.getSkuPrice(specIndex, value)\n          var m2 = m1 ? _vm.getSkuPrice(specIndex, value) : null\n          return {\n            $orig: $orig,\n            m1: m1,\n            m2: m2,\n          }\n        })\n        return {\n          $orig: $orig,\n          l0: l0,\n        }\n      })\n    : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event, g) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        g = _temp2.g\n      var _temp, _temp2\n      $event.stopPropagation()\n      return (function () {\n        return _vm.addToCart(g)\n      })($event)\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        m0: m0,\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./AsView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./AsView.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"page\">\r\n\t\t<!-- 固定顶部自定义标题栏 -->\r\n\t\t<view class=\"nav-fixed\" :style=\"navInlineStyle\">\r\n\t\t\t<view class=\"nav-inner\">\r\n\t\t\t\t<text class=\"nav-title\">雷波农特</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 页面主体：用 padding-top 把内容顶到自定义导航栏下方 -->\r\n\t\t<view class=\"page-body\" :style=\"{ paddingTop: contentTopPx + 'px' }\">\r\n\r\n\t\t\t<!-- 搜索条（第二部分） -->\r\n\t\t\t<view class=\"search-wrap\">\r\n\t\t\t\t<view class=\"search-box\">\r\n\t\t\t\t\t<!-- 如果你用 uView2，可换成 <u-icon name=\"search\" size=\"18\" /> -->\r\n\t\t\t\t\t<u-icon name=\"search\" class=\"icon-search\"></u-icon>\r\n\t\t\t\t\t<text class=\"search-text\">搜索商品</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 商品区（第三部分：左右分栏） -->\r\n\t\t\t<view class=\"goods-wrap\">\r\n\t\t\t\t<!-- 左侧：分类 Tab（可滚动） -->\r\n\t\t\t\t<scroll-view scroll-y class=\"left-tabs\">\r\n\t\t\t\t\t<view v-for=\"(c, i) in categories\" :key=\"c.id\" class=\"tab-item\"\r\n\t\t\t\t\t\t:class=\"{ active: i === activeIndex }\" @tap=\"tapCat(i)\">\r\n\t\t\t\t\t\t{{ c.name }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\r\n\t\t\t\t<!-- 右侧：商品列表（可滚动） -->\r\n\t\t\t\t<scroll-view scroll-y class=\"right-list\">\r\n\t\t\t\t\t<!-- 顶部Banner：展示id为1的文章 -->\r\n\t\t\t\t\t<view class=\"banner-container\" @click=\"goToBannerDetail\" v-if=\"bannerArticle\">\r\n\t\t\t\t\t\t<image class=\"banner-image\" :src=\"bannerArticle.image\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<view class=\"banner-overlay\">\r\n\t\t\t\t\t\t\t<text class=\"banner-title\">{{ bannerArticle.name }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 默认占位Banner -->\r\n\t\t\t\t\t<view class=\"banner-placeholder\" v-else></view>\r\n\r\n\t\t\t\t\t<!-- 加载状态 -->\r\n\t\t\t\t\t<view class=\"loading-container\" v-if=\"goodsLoading\">\r\n\t\t\t\t\t\t<view class=\"loading-text\">加载中...</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 商品项 -->\r\n\t\t\t\t\t<view class=\"item\" v-for=\"(g, k) in currentGoods\" :key=\"g.goodsId || k\"\r\n\t\t\t\t\t\t@click=\"goToGoodsDetail(g.goodsId)\">\r\n\t\t\t\t\t\t<view class=\"thumb\">\r\n\t\t\t\t\t\t\t<image class=\"thumb-image\" :src=\"g.img\" mode=\"aspectFill\" :lazy-load=\"true\"\r\n\t\t\t\t\t\t\t\t@load=\"onImageLoad(k)\" @error=\"onImageError(k)\"></image>\r\n\r\n\t\t\t\t\t\t\t<view class=\"image-skeleton\" v-if=\"!g.imageLoaded\">\r\n\t\t\t\t\t\t\t\t<view class=\"skeleton-shimmer\"></view>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t<!-- 左上角热销图标 -->\r\n\t\t\t\t\t\t\t<view class=\"item-badge\" v-if=\"g.isHot\">\r\n\t\t\t\t\t\t\t\t<image class=\"badge-icon\" src=\"/static/images/hot-icon.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"item-badge\" v-else-if=\"g.originalPrice && g.originalPrice > g.price\">\r\n\t\t\t\t\t\t\t\t<image class=\"badge-icon\" src=\"/static/images/saleicon.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<view class=\"info\">\r\n\t\t\t\t\t\t\t<view class=\"title\">{{ g.title }}</view>\r\n\t\t\t\t\t\t\t<view class=\"tags\">{{ g.tags }}</view>\r\n\t\t\t\t\t\t\t<view class=\"bottom\">\r\n\t\t\t\t\t\t\t\t<view class=\"price-section\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"price\">¥{{ g.price }}</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"original-price\"\r\n\t\t\t\t\t\t\t\t\t\tv-if=\"g.originalPrice && g.originalPrice > g.price\">¥{{ g.originalPrice }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"btn-add\" @tap.stop=\"()=>addToCart(g)\">\r\n\t\t\t\t\t\t\t\t\t<image class=\"add-cart-icon\" src=\"/static/images/add-cart.png\" mode=\"aspectFit\">\r\n\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 空状态 -->\r\n\t\t\t\t\t<view class=\"empty-container\" v-if=\"!goodsLoading && currentGoods.length === 0\">\r\n\t\t\t\t\t\t<view class=\"empty-text\">暂无商品</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 推荐商品 -->\r\n\t\t\t\t\t<view class=\"recommend-section\" v-if=\"recommendGoods.length > 0\">\r\n\t\t\t\t\t\t<view class=\"recommend-header\">\r\n\t\t\t\t\t\t\t<view class=\"recommend-title\">\r\n\t\t\t\t\t\t\t\t<text class=\"title-text\">推荐商品</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"recommend-grid\">\r\n\t\t\t\t\t\t\t<view class=\"recommend-item\" v-for=\"item in recommendGoods\" :key=\"item.goodsId\" \r\n\t\t\t\t\t\t\t\t@click=\"goToGoodsDetail(item.goodsId)\">\r\n\t\t\t\t\t\t\t\t<view class=\"recommend-thumb\">\r\n\t\t\t\t\t\t\t\t\t<image class=\"recommend-image\" :src=\"item.img\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t\t\t<view class=\"recommend-badge\" v-if=\"item.isHot\">HOT</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"recommend-info\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"recommend-name\">{{ item.title }}</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"recommend-price-row\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"recommend-price\">¥{{ item.price }}</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"recommend-original\" \r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"item.originalPrice && item.originalPrice > item.price\">¥{{ item.originalPrice }}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- SKU选择弹窗 -->\r\n\t\t<u-popup v-if=\"showSku\" :show=\"showSku\" @close=\"closeSkuSelector\" mode=\"bottom\" :round=\"20\" :overlay=\"true\"\r\n\t\t\t:closeOnClickOverlay=\"true\" :safeAreaInsetBottom=\"true\">\r\n\t\t\t<view class=\"sku-popup\">\r\n\t\t\t\t<view class=\"sku-header\">\r\n\t\t\t\t\t<image class=\"sku-product-image\" :src=\"getSkuImage()\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t<view class=\"sku-product-info\">\r\n\t\t\t\t\t\t<text class=\"sku-product-name\">{{ productName }}</text>\r\n\t\t\t\t\t\t<view class=\"sku-product-price\">\r\n\t\t\t\t\t\t\t<text class=\"sku-price-symbol\">¥</text>\r\n\t\t\t\t\t\t\t<text class=\"sku-price-value\">{{ selectedSkuPrice }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"sku-close\" @click=\"closeSkuSelector\">\r\n\t\t\t\t\t\t<u-icon name=\"close\" color=\"#999\" size=\"20\"></u-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"sku-options\">\r\n\t\t\t\t\t<view class=\"sku-option-group\" v-for=\"(spec, specIndex) in skuOptions.spec\" :key=\"specIndex\">\r\n\t\t\t\t\t\t<text class=\"option-title\">{{ spec.name }}</text>\r\n\t\t\t\t\t\t<view class=\"option-items\">\r\n\t\t\t\t\t\t\t<view class=\"option-item\" v-for=\"(value, valueIndex) in spec.values\" :key=\"valueIndex\"\r\n\t\t\t\t\t\t\t\t:class=\"{ active: spec.selectedValue === value }\"\r\n\t\t\t\t\t\t\t\t@click=\"selectSpecValue(specIndex, value)\">\r\n\t\t\t\t\t\t\t\t<view class=\"option-content\">\r\n\t\t\t\t\t\t\t\t\t<text>{{ value }}</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"sku-price\"\r\n\t\t\t\t\t\t\t\t\t\tv-if=\"getSkuPrice(specIndex, value)\">¥{{ getSkuPrice(specIndex, value) }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"quantity-selector\">\r\n\t\t\t\t\t\t<text class=\"quantity-title\">数量</text>\r\n\t\t\t\t\t\t<view class=\"quantity-control\">\r\n\t\t\t\t\t\t\t<view class=\"quantity-btn\" @click=\"decreaseQuantity\">\r\n\t\t\t\t\t\t\t\t<u-icon name=\"minus\" color=\"#666\" size=\"16\"></u-icon>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text class=\"quantity-value\">{{ quantity }}</text>\r\n\t\t\t\t\t\t\t<view class=\"quantity-btn\" @click=\"increaseQuantity\">\r\n\t\t\t\t\t\t\t\t<u-icon name=\"plus\" color=\"#666\" size=\"16\"></u-icon>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"sku-footer\">\r\n\t\t\t\t\t<view class=\"sku-total\">\r\n\t\t\t\t\t\t<text>总计：</text>\r\n\t\t\t\t\t\t<text class=\"total-price\">¥{{ totalPrice }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"sku-action\" @click=\"confirmSkuAction\">\r\n\t\t\t\t\t\t<text>{{ skuActionType === 'cart' ? '加入购物车' : '确认购买' }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tfetchGoodsTreeList,\r\n\t\tfetchGoodsList,\r\n\t\tfetchGoodsDetail\r\n\t} from '@/api/goods'\r\n\timport {\r\n\t\tAddCart\r\n\t} from '@/api/cart'\r\n\timport {\r\n\t\tfetchArticleList\r\n\t} from '@/api/article'\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 顶部安全/胶囊\r\n\t\t\t\tstatusBarHeight: 0,\r\n\t\t\t\tcapsuleHeight: 44, // 默认值，实际小程序里会用胶囊高度覆盖\r\n\t\t\t\tcapsuleTop: 0, // 胶囊距离顶部的距离\r\n\r\n\t\t\t\t// 分类数据 - 从接口获取\r\n\t\t\t\tcategories: [],\r\n\t\t\t\tactiveIndex: 0,\r\n\t\t\t\t// 当前分类的商品列表\r\n\t\t\t\tcurrentGoodsList: [],\r\n\t\t\t\tgoodsLoading: false,\r\n\t\t\t\t// Banner文章数据\r\n\t\t\t\tbannerArticle: null,\r\n\t\t\t\t\r\n\t\t\t\t// 推荐商品数据\r\n\t\t\t\trecommendGoods: [],\r\n\t\t\t\t\r\n\t\t\t\t// SKU弹窗相关\r\n\t\t\t\tshowSku: false,\r\n\t\t\t\tskuActionType: 'cart', // 'cart' 或 'buy'\r\n\t\t\t\tselectedSkuIndex: 0,\r\n\t\t\t\tquantity: 1,\r\n\t\t\t\tproductName: '',\r\n\t\t\t\tcurrentPrice: 0,\r\n\t\t\t\toriginalPrice: 0,\r\n\t\t\t\tskuOptions: {\r\n\t\t\t\t\tspec: []\r\n\t\t\t\t},\r\n\t\t\t\tproductData: null,\r\n\t\t\t\tproductImages: [],\r\n\t\t\t\t_skuSpecsCache: null // SKU缓存\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t// 内联样式：顶部固定栏 paddingTop=胶囊top，height=胶囊height\r\n\t\t\tnavInlineStyle() {\r\n\t\t\t\treturn `padding-top:${this.capsuleTop}px;background:#fff;`\r\n\t\t\t},\r\n\t\t\t// 导航栏总高度：胶囊top + 胶囊height\r\n\t\t\tnavTotalHeight() {\r\n\t\t\t\treturn this.capsuleTop + this.capsuleHeight\r\n\t\t\t},\r\n\t\t\t// 内容区顶部偏移：导航栏总高度\r\n\t\t\tcontentTopPx() {\r\n\t\t\t\treturn this.navTotalHeight\r\n\t\t\t},\r\n\t\t\tcurrentGoods() {\r\n\t\t\t\treturn this.currentGoodsList || []\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// SKU相关计算属性\r\n\t\t\tselectedSkuPrice() {\r\n\t\t\t\tconst selectedSku = this.getSelectedSku()\r\n\t\t\t\tif (selectedSku) {\r\n\t\t\t\t\t// 优先使用促销价格，其次使用原价\r\n\t\t\t\t\treturn selectedSku.promotionPrice || selectedSku.price || this.currentPrice\r\n\t\t\t\t}\r\n\t\t\t\treturn this.currentPrice || 0\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\ttotalPrice() {\r\n\t\t\t\treturn (this.selectedSkuPrice * this.quantity).toFixed(2)\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tconst sys = uni.getSystemInfoSync()\r\n\t\t\tthis.statusBarHeight = sys.statusBarHeight || 0\r\n\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\ttry {\r\n\t\t\t\tconst rect = wx.getMenuButtonBoundingClientRect()\r\n\t\t\t\tif (rect && rect.height) {\r\n\t\t\t\t\tthis.capsuleHeight = rect.height\r\n\t\t\t\t\tthis.capsuleTop = rect.top + 5\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {}\r\n\t\t\t// #endif\r\n\r\n\t\t\t// 其他端给个合理默认\r\n\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\tthis.capsuleHeight = 44\r\n\t\t\tthis.capsuleTop = this.statusBarHeight\r\n\t\t\t// #endif\r\n\r\n\t\t\t// 获取商品分类数据\r\n\t\t\tthis.loadCategories()\r\n\t\t\t// 获取Banner文章数据\r\n\t\t\tthis.loadBannerArticle()\r\n\t\t\t// 获取推荐商品数据\r\n\t\t\tthis.loadRecommendGoods()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\ttapCat(i) {\r\n\t\t\t\tthis.activeIndex = i\r\n\t\t\t\tconsole.log('切换到分类:', this.categories[i].name)\r\n\t\t\t\t// 根据选中的二级分类加载商品\r\n\t\t\t\tthis.loadGoodsByCategory(this.categories[i])\r\n\t\t\t},\r\n\r\n\t\t\t// 加载商品分类数据\r\n\t\t\tasync loadCategories() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// TODO fetchGoodsTreeList 会在这里使用\r\n\t\t\t\t\tconst res = await fetchGoodsTreeList()\r\n\t\t\t\t\tif (res.code == 200 && res.data && res.data.length > 0) {\r\n\t\t\t\t\t\t// 处理分类数据，以第二层为左侧分类\r\n\t\t\t\t\t\tthis.categories = []\r\n\t\t\t\t\t\tres.data.forEach(firstLevel => {\r\n\t\t\t\t\t\t\tif (firstLevel.children && firstLevel.children.length > 0) {\r\n\t\t\t\t\t\t\t\tfirstLevel.children.forEach(secondLevel => {\r\n\t\t\t\t\t\t\t\t\tthis.categories.push({\r\n\t\t\t\t\t\t\t\t\t\tid: secondLevel.id,\r\n\t\t\t\t\t\t\t\t\t\tname: secondLevel.name,\r\n\t\t\t\t\t\t\t\t\t\tparentId: firstLevel.id\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t// 如果有分类数据，设置初始选中并加载第一个分类的商品\r\n\t\t\t\t\t\tif (this.categories.length > 0) {\r\n\t\t\t\t\t\t\tthis.activeIndex = 0\r\n\t\t\t\t\t\t\tthis.loadGoodsByCategory(this.categories[0])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 如果接口没有数据，显示空分类\r\n\t\t\t\t\t\tconsole.log('分类接口无数据')\r\n\t\t\t\t\t\tthis.categories = []\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('获取分类数据失败:', error)\r\n\t\t\t\t\t// 异常时显示空分类\r\n\t\t\t\t\tthis.categories = []\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 根据分类加载商品\r\n\t\t\tasync loadGoodsByCategory(category) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.goodsLoading = true\r\n\r\n\t\t\t\t\t// 直接使用当前二级分类的ID获取商品\r\n\t\t\t\t\t// TODO fetchGoodsList 会在这里使用\r\n\t\t\t\t\tconst params = {\r\n\t\t\t\t\t\tpageSize: 20,\r\n\t\t\t\t\t\tpageNo: 1,\r\n\t\t\t\t\t\tcategory2Id: category.id // 直接使用二级分类ID\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst res = await fetchGoodsList(params)\r\n\t\t\t\t\tif (res.code == 200 && res.rows && res.rows.length > 0) {\r\n\t\t\t\t\t\tthis.currentGoodsList = res.rows.map(item => ({\r\n\t\t\t\t\t\t\tgoodsId: item.goodsId,\r\n\t\t\t\t\t\t\ttitle: item.goodsName,\r\n\t\t\t\t\t\t\tprice: item.promotionPrice || item.price,\r\n\t\t\t\t\t\t\toriginalPrice: item.price,\r\n\t\t\t\t\t\t\ttags: item.sellingPoint || '精选商品',\r\n\t\t\t\t\t\t\timg: item.image || item.goodsImage || item.img,\r\n\t\t\t\t\t\t\tisHot: item.isHot == 1,\r\n\t\t\t\t\t\t\timageLoaded: false\r\n\t\t\t\t\t\t}))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 如果接口没有数据，显示空列表\r\n\t\t\t\t\t\tconsole.log('商品列表接口无数据')\r\n\t\t\t\t\t\tthis.currentGoodsList = []\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('加载商品失败:', error)\r\n\t\t\t\t\t// 异常时显示空列表\r\n\t\t\t\t\tthis.currentGoodsList = []\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.goodsLoading = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 跳转商品详情\r\n\t\t\tgoToGoodsDetail(goodsId) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/subpackages/goods/detail/detail?goodsId=${goodsId}`\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 添加到购物车\r\n\t\t\tasync addToCart(item) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (!item.goodsId) {\r\n\t\t\t\t\t\tconsole.error('商品信息不存在')\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 获取商品详情\r\n\t\t\t\t\tconst res = await fetchGoodsDetail(item.goodsId)\r\n\t\t\t\t\tif (res.code === 200 && res.data) {\r\n\t\t\t\t\t\tconst data = res.data\r\n\t\t\t\t\t\tconsole.log('获取到的商品详情数据:', data)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 处理商品数据\r\n\t\t\t\t\t\tthis.processProductData(data)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 显示SKU选择弹窗让用户选择数量和规格\r\n\t\t\t\t\t\tthis.skuActionType = 'cart'\r\n\t\t\t\t\t\tthis.showSku = true\r\n\t\t\t\t\t\tconsole.log('显示SKU弹窗', {\r\n\t\t\t\t\t\t\tshowSku: this.showSku,\r\n\t\t\t\t\t\t\tproductName: this.productName,\r\n\t\t\t\t\t\t\tskuOptions: this.skuOptions\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg || '获取商品信息失败',\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('添加购物车失败:', error)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '添加失败，请重试',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 图片加载处理\r\n\t\t\tonImageLoad(index) {\r\n\t\t\t\tif (this.currentGoodsList[index]) {\r\n\t\t\t\t\tthis.$set(this.currentGoodsList[index], 'imageLoaded', true)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 图片错误处理\r\n\t\t\tonImageError(index) {\r\n\t\t\t\tif (this.currentGoodsList[index]) {\r\n\t\t\t\t\tthis.$set(this.currentGoodsList[index], 'imageLoaded', true)\r\n\t\t\t\t\t// 设置默认图片\r\n\t\t\t\t\tthis.$set(this.currentGoodsList[index], 'img',\r\n\t\t\t\t\t\t'https://pic1.imgdb.cn/item/6895daa458cb8da5c812a9a6.jpg')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 获取Banner文章数据\r\n\t\t\tasync loadBannerArticle() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// TODO fetchArticleList 会在这里使用\r\n\t\t\t\t\tconst params = {\r\n\t\t\t\t\t\tpageNum: 1,\r\n\t\t\t\t\t\tpageSize: 10\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst res = await fetchArticleList(params)\r\n\t\t\t\t\tif (res.code == 200 && res.rows && res.rows.length > 0) {\r\n\t\t\t\t\t\t// 查找id为1的文章作为Banner展示\r\n\t\t\t\t\t\tconst bannerArticle = res.rows.find(item => item.id === 1)\r\n\t\t\t\t\t\tif (bannerArticle) {\r\n\t\t\t\t\t\t\tthis.bannerArticle = bannerArticle\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('获取Banner文章数据失败:', error)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 点击Banner跳转到文章详情\r\n\t\t\tgoToBannerDetail() {\r\n\t\t\t\tif (this.bannerArticle && this.bannerArticle.id) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: `/subpackages/help/richText/richText?id=${this.bannerArticle.id}`\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 获取推荐商品数据\r\n\t\t\tasync loadRecommendGoods() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// TODO fetchGoodsList 会在这里使用\r\n\t\t\t\t\tconst params = {\r\n\t\t\t\t\t\tpageSize: 4, // 获取4个推荐商品\r\n\t\t\t\t\t\tpageNo: 1,\r\n\t\t\t\t\t\tisRecommend: 1 // 获取推荐商品\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst res = await fetchGoodsList(params)\r\n\t\t\t\t\tif (res.code == 200 && res.rows && res.rows.length > 0) {\r\n\t\t\t\t\t\tthis.recommendGoods = res.rows.map(item => ({\r\n\t\t\t\t\t\t\tgoodsId: item.goodsId,\r\n\t\t\t\t\t\t\ttitle: item.goodsName,\r\n\t\t\t\t\t\t\tprice: item.promotionPrice || item.price,\r\n\t\t\t\t\t\t\toriginalPrice: item.price,\r\n\t\t\t\t\t\t\timg: item.image || item.goodsImage || item.img,\r\n\t\t\t\t\t\t\tisHot: item.isHot == 1\r\n\t\t\t\t\t\t}))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 如果接口没有数据，显示空推荐\r\n\t\t\t\t\t\tconsole.log('推荐商品接口无数据')\r\n\t\t\t\t\t\tthis.recommendGoods = []\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('获取推荐商品失败:', error)\r\n\t\t\t\t\t// 异常时显示空推荐\r\n\t\t\t\t\tthis.recommendGoods = []\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 处理商品数据\r\n\t\t\tprocessProductData(data) {\r\n\t\t\t\tconsole.log('开始处理商品数据:', data)\r\n\t\t\t\t\r\n\t\t\t\t// 重置数据\r\n\t\t\t\tthis.clearSkuCache()\r\n\t\t\t\t\r\n\t\t\t\t// 设置商品基本信息\r\n\t\t\t\tthis.productName = data.goodsName || '商品名称'\r\n\t\t\t\tthis.currentPrice = data.promotionPrice || data.price || 0\r\n\t\t\t\tthis.originalPrice = data.originPrice || data.price || 0\r\n\t\t\t\tthis.quantity = 1\r\n\t\t\t\t\r\n\t\t\t\t// 设置商品数据\r\n\t\t\t\tthis.productData = {\r\n\t\t\t\t\t...data,\r\n\t\t\t\t\tquantity: data.quantity || 0,\r\n\t\t\t\t\tskus: data.skus || []\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconsole.log('设置的商品数据:', {\r\n\t\t\t\t\tproductName: this.productName,\r\n\t\t\t\t\tcurrentPrice: this.currentPrice,\r\n\t\t\t\t\tproductData: this.productData\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t// 处理商品图片\r\n\t\t\t\tthis.processProductImages(data)\r\n\t\t\t\t\r\n\t\t\t\t// 处理SKU选项\r\n\t\t\t\tthis.processSkuOptions(data)\r\n\t\t\t},\r\n\r\n\t\t\t// 处理商品图片\r\n\t\t\tprocessProductImages(data) {\r\n\t\t\t\tthis.productImages = []\r\n\t\t\t\t\r\n\t\t\t\t// 处理轮播图\r\n\t\t\t\tif (data.goodsImages) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst images = JSON.parse(data.goodsImages)\r\n\t\t\t\t\t\tif (Array.isArray(images)) {\r\n\t\t\t\t\t\t\tthis.productImages = images.map(url => ({ url }))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t// 如果解析失败，尝试按逗号分割\r\n\t\t\t\t\t\tconst images = data.goodsImages.split(',').filter(url => url.trim())\r\n\t\t\t\t\t\tthis.productImages = images.map(url => ({ url: url.trim() }))\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 如果没有轮播图，使用主图\r\n\t\t\t\tif (this.productImages.length === 0 && data.goodsImage) {\r\n\t\t\t\t\tthis.productImages = [{ url: data.goodsImage }]\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 如果还是没有图片，保持空数组\r\n\t\t\t\tif (this.productImages.length === 0) {\r\n\t\t\t\t\tthis.productImages = []\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 处理SKU选项\r\n\t\t\tprocessSkuOptions(data) {\r\n\t\t\t\tconsole.log('开始处理SKU选项')\r\n\t\t\t\tconsole.log('productData:', data)\r\n\r\n\t\t\t\tif (!data || !data.skus) {\r\n\t\t\t\t\tconsole.log('没有SKU数据')\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 清空之前的选项\r\n\t\t\t\tthis.skuOptions.spec = []\r\n\r\n\t\t\t\tconst skus = data.skus\r\n\t\t\t\tconst specOptions = data.specOptions\r\n\r\n\t\t\t\tconsole.log('原始SKU数据:', skus)\r\n\t\t\t\tconsole.log('规格配置:', specOptions)\r\n\r\n\t\t\t\t// 解析规格选项配置\r\n\t\t\t\tlet specConfig = []\r\n\t\t\t\tif (specOptions) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tspecConfig = JSON.parse(specOptions)\r\n\t\t\t\t\t\tconsole.log('解析后的规格配置:', specConfig)\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.error('解析规格配置失败:', error)\r\n\t\t\t\t\t\tspecConfig = []\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 如果有规格配置，按配置处理\r\n\t\t\t\tif (specConfig && specConfig.length > 0) {\r\n\t\t\t\t\t// 使用缓存的SKU规格数据\r\n\t\t\t\t\tconst cachedSkus = this.getCachedSkuSpecs()\r\n\r\n\t\t\t\t\t// 根据规格配置创建选项\r\n\t\t\t\t\tspecConfig.forEach(spec => {\r\n\t\t\t\t\t\tconsole.log('处理规格:', spec)\r\n\t\t\t\t\t\tconst specOption = {\r\n\t\t\t\t\t\t\tname: spec.attrName,\r\n\t\t\t\t\t\t\tvalues: spec.attrValue,\r\n\t\t\t\t\t\t\tselectedValue: spec.attrValue[0], // 默认选择第一个\r\n\t\t\t\t\t\t\tskus: []\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// 为每个规格值找到对应的SKU\r\n\t\t\t\t\t\tspec.attrValue.forEach(value => {\r\n\t\t\t\t\t\t\tconsole.log('查找规格值:', value)\r\n\t\t\t\t\t\t\tconst matchingSkus = cachedSkus.filter(sku => {\r\n\t\t\t\t\t\t\t\treturn sku.parsedSpecs[spec.attrName] === value\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\tconsole.log('匹配的SKU:', matchingSkus)\r\n\r\n\t\t\t\t\t\t\tif (matchingSkus.length > 0) {\r\n\t\t\t\t\t\t\t\tspecOption.skus.push({\r\n\t\t\t\t\t\t\t\t\tskuId: matchingSkus[0].skuId,\r\n\t\t\t\t\t\t\t\t\tprice: matchingSkus[0].price,\r\n\t\t\t\t\t\t\t\t\tquantity: matchingSkus[0].quantity,\r\n\t\t\t\t\t\t\t\t\tvalue: value\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\tthis.skuOptions.spec.push(specOption)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 如果有SKU数据，使用第一个SKU的价格作为默认价格\r\n\t\t\t\tif (skus.length > 0) {\r\n\t\t\t\t\tthis.selectedSkuIndex = 0\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log('处理后的SKU选项:', this.skuOptions.spec)\r\n\t\t\t},\r\n\r\n\t\t\t// 获取缓存的SKU规格数据\r\n\t\t\tgetCachedSkuSpecs() {\r\n\t\t\t\tif (!this._skuSpecsCache && this.productData && this.productData.skus) {\r\n\t\t\t\t\tthis._skuSpecsCache = this.productData.skus.map(sku => {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t...sku,\r\n\t\t\t\t\t\t\t\tparsedSpecs: JSON.parse(sku.fullSpecs || '{}')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\tconsole.error('解析SKU规格失败:', error)\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t...sku,\r\n\t\t\t\t\t\t\t\tparsedSpecs: {}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\treturn this._skuSpecsCache || []\r\n\t\t\t},\r\n\r\n\t\t\t// 清理SKU缓存\r\n\t\t\tclearSkuCache() {\r\n\t\t\t\tthis._skuSpecsCache = null\r\n\t\t\t\tthis.skuOptions.spec = []\r\n\t\t\t},\r\n\r\n\t\t\t// 获取当前选中的SKU\r\n\t\t\tgetSelectedSku() {\r\n\t\t\t\tif (!this.productData || !this.productData.skus || this.productData.skus.length === 0) {\r\n\t\t\t\t\treturn null\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 如果没有规格选项，返回第一个SKU\r\n\t\t\t\tif (!this.skuOptions.spec || this.skuOptions.spec.length === 0) {\r\n\t\t\t\t\treturn this.productData.skus[0]\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 根据选中的规格找到对应的SKU\r\n\t\t\t\tconst selectedSpecs = this.skuOptions.spec.map(spec => spec.selectedValue)\r\n\t\t\t\t\r\n\t\t\t\tconst matchedSku = this.productData.skus.find(sku => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst fullSpecs = JSON.parse(sku.fullSpecs || '{}')\r\n\t\t\t\t\t\treturn selectedSpecs.every((value, index) => {\r\n\t\t\t\t\t\t\tconst specName = this.skuOptions.spec[index].name\r\n\t\t\t\t\t\t\treturn fullSpecs[specName] === value\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\t// 如果找不到匹配的SKU，返回第一个\r\n\t\t\t\treturn matchedSku || this.productData.skus[0]\r\n\t\t\t},\r\n\r\n\t\t\t// 关闭SKU选择器\r\n\t\t\tcloseSkuSelector() {\r\n\t\t\t\tthis.showSku = false\r\n\t\t\t},\r\n\r\n\t\t\t// 选择规格值\r\n\t\t\tselectSpecValue(specIndex, value) {\r\n\t\t\t\tthis.skuOptions.spec[specIndex].selectedValue = value\r\n\t\t\t\tthis.updateSelectedSku()\r\n\t\t\t},\r\n\r\n\t\t\t// 获取SKU价格\r\n\t\t\tgetSkuPrice(specIndex, value) {\r\n\t\t\t\tconst spec = this.skuOptions.spec[specIndex]\r\n\t\t\t\tif (!spec || !spec.skus) return null\r\n\r\n\t\t\t\tconst sku = spec.skus.find(s => s.value === value)\r\n\t\t\t\treturn sku ? sku.price : null\r\n\t\t\t},\r\n\r\n\t\t\t// 更新选中的SKU\r\n\t\t\tupdateSelectedSku() {\r\n\t\t\t\t// 根据当前选择的规格值找到对应的SKU\r\n\t\t\t\tconst selectedSpecs = this.skuOptions.spec.map(spec => spec.selectedValue)\r\n\t\t\t\tconst cachedSkus = this.getCachedSkuSpecs()\r\n\r\n\t\t\t\tif (cachedSkus && cachedSkus.length > 0) {\r\n\t\t\t\t\tconst matchingSku = cachedSkus.find(sku => {\r\n\t\t\t\t\t\treturn selectedSpecs.every((value, index) => {\r\n\t\t\t\t\t\t\tconst specName = this.skuOptions.spec[index].name\r\n\t\t\t\t\t\t\treturn sku.parsedSpecs[specName] === value\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tif (matchingSku) {\r\n\t\t\t\t\t\tthis.selectedSkuIndex = this.productData.skus.indexOf(matchingSku)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 增加数量\r\n\t\t\tincreaseQuantity() {\r\n\t\t\t\tthis.quantity++\r\n\t\t\t},\r\n\r\n\t\t\t// 减少数量\r\n\t\t\tdecreaseQuantity() {\r\n\t\t\t\tif (this.quantity > 1) {\r\n\t\t\t\t\tthis.quantity--\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 获取SKU弹窗中的商品图片\r\n\t\t\tgetSkuImage() {\r\n\t\t\t\tif (this.productImages && this.productImages.length > 0 && this.productImages[0]) {\r\n\t\t\t\t\treturn this.productImages[0].url || ''\r\n\t\t\t\t}\r\n\t\t\t\treturn ''\r\n\t\t\t},\r\n\r\n\t\t\t// 直接添加到购物车（无SKU选择）\r\n\t\t\tasync directAddToCart(data) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// TODO AddCart 会在这里使用\r\n\t\t\t\t\tconst params = {\r\n\t\t\t\t\t\tskuId: data.skus && data.skus.length > 0 ? data.skus[0].skuId : data.goodsId,\r\n\t\t\t\t\t\tgoodsNum: 1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst res = await AddCart(params)\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '已添加到购物车',\r\n\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg || '添加失败',\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('添加购物车失败:', error)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '添加失败，请重试',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 确认SKU选择操作\r\n\t\t\tasync confirmSkuAction() {\r\n\t\t\t\tif (this.skuActionType === 'cart') {\r\n\t\t\t\t\tawait this.confirmAddToCart()\r\n\t\t\t\t}\r\n\t\t\t\t// 不需要立即购买逻辑，按要求移除\r\n\t\t\t},\r\n\r\n\t\t\t// 确认添加到购物车\r\n\t\t\tasync confirmAddToCart() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst selectedSku = this.getSelectedSku()\r\n\t\t\t\t\tif (!selectedSku) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '请选择商品规格',\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// TODO AddCart 会在这里使用\r\n\t\t\t\t\tconst params = {\r\n\t\t\t\t\t\tskuId: selectedSku.skuId,\r\n\t\t\t\t\t\tgoodsNum: this.quantity\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst res = await AddCart(params)\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '已添加到购物车',\r\n\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.closeSkuSelector()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg || '添加失败',\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('添加购物车失败:', error)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '添加失败，请重试',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.page {\r\n\t\theight: 100vh;\r\n\t\tbackground: #ffffff;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t/* 顶部固定栏 */\r\n\t.nav-fixed {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tz-index: 999;\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.04);\r\n\t}\r\n\r\n\t.nav-inner {\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-end;\r\n\t\t/* 让标题贴近底部，下面还有更多的 padding */\r\n\t\tjustify-content: center;\r\n\t\tpadding: 0 30rpx 16rpx 30rpx;\r\n\t\tposition: relative;\r\n\t\tmargin-bottom: 30rpx; /* 增加下边距 */\r\n\t}\r\n\r\n\t.nav-title {\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #111;\r\n\t\tline-height: 1;\r\n\t}\r\n\r\n\t/* 页面主体（垂直布局：搜索条 + 分栏区） */\r\n\t.page-body {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t/* 搜索条 */\r\n\t.search-wrap {\r\n\t\tpadding: 0 12rpx;\r\n\t\tmargin-top: 12rpx;\r\n\t}\r\n\r\n\t.search-box {\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\tbackground: #f6f7f9;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.icon-search {\r\n\t\tfont-size: 26rpx;\r\n\t\tmargin-right: 8rpx;\r\n\t}\r\n\r\n\t.search-text {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t/* 左右分栏容器 */\r\n\t.goods-wrap {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tmin-height: 0;\r\n\t\t/* 关键：让子元素 scroll-view 正常占满并可滚动 */\r\n\t}\r\n\r\n\t/* 左侧 Tab */\r\n\t.left-tabs {\r\n\t\twidth: 176rpx;\r\n\t\tbackground: #f7f8fa;\r\n\t\tborder-right: 1rpx solid #eee;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.tab-item {\r\n\t\theight: 96rpx;\r\n\t\tpadding: 0 16rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tcolor: #666;\r\n\t\tfont-size: 26rpx;\r\n\t}\r\n\r\n\t.tab-item.active {\r\n\t\tcolor: #07c160;\r\n\t\tfont-weight: 600;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-left: 6rpx solid #07c160;\r\n\t}\r\n\r\n\t/* 右侧列表 */\r\n\t.right-list {\r\n\t\tflex: 1;\r\n\t\theight: 100%;\r\n\t\tbackground: #fff;\r\n\t}\r\n\r\n\t/* 顶部Banner容器 */\r\n\t.banner-container {\r\n\t\theight: 226rpx;\r\n\t\tmargin: 12rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\toverflow: hidden;\r\n\t\tposition: relative;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\r\n\r\n\t\t&:active {\r\n\t\t\ttransform: scale(0.98);\r\n\t\t\ttransition: transform 0.1s ease;\r\n\t\t}\r\n\t}\r\n\r\n\t.banner-image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tobject-fit: cover;\r\n\t}\r\n\r\n\t.banner-overlay {\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbackground: linear-gradient(transparent, rgba(0, 0, 0, 0.6));\r\n\t\tpadding: 30rpx 24rpx 20rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-start;\r\n\t\talign-items: flex-end;\r\n\t}\r\n\r\n\t.banner-title {\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 600;\r\n\t\ttext-shadow: 0 2rpx 4rpx rgba(0, 0, 0, 0.5);\r\n\t\tline-height: 1.4;\r\n\t\tdisplay: -webkit-box;\r\n\t\t-webkit-line-clamp: 2;\r\n\t\t-webkit-box-orient: vertical;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t/* 默认占位 banner */\r\n\t.banner-placeholder {\r\n\t\theight: 226rpx;\r\n\t\tmargin: 12rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\tbackground: linear-gradient(90deg, #f5f7fb, #eef1f6);\r\n\t}\r\n\r\n\t/* 商品项 */\r\n\t.item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: stretch;\r\n\t\tpadding: 16rpx 12rpx;\r\n\t\tborder-bottom: 1rpx solid #f2f2f2;\r\n\t}\r\n\r\n\t.thumb {\r\n\t\twidth: 120rpx;\r\n\t\theight: 120rpx;\r\n\t\tmargin-right: 12rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tbackground: #f2f2f2;\r\n\t\tposition: relative;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.thumb-image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tobject-fit: cover;\r\n\t}\r\n\r\n\t.image-skeleton {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground: linear-gradient(90deg, #f0f4f8 25%, #e2e8f0 50%, #f0f4f8 75%);\r\n\t\tbackground-size: 200% 100%;\r\n\t\tanimation: skeleton-loading 1.8s infinite ease-in-out;\r\n\t}\r\n\r\n\t.item-badge {\r\n\t\tposition: absolute;\r\n\t\ttop: 4rpx;\r\n\t\tleft: 4rpx;\r\n\t\tz-index: 2;\r\n\t}\r\n\r\n\t.badge-icon {\r\n\t\twidth: 32rpx;\r\n\t\theight: 32rpx;\r\n\t}\r\n\r\n\t.info {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tmin-width: 0;\r\n\t}\r\n\r\n\t.title {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tline-height: 1.4;\r\n\t\tdisplay: -webkit-box;\r\n\t\t-webkit-line-clamp: 2;\r\n\t\t-webkit-box-orient: vertical;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.tags {\r\n\t\tmargin-top: 6rpx;\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #999;\r\n\t\twhite-space: nowrap;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t}\r\n\r\n\t.bottom {\r\n\t\tmargin-top: 10rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.price-section {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\r\n\t.price {\r\n\t\tcolor: #e54d42;\r\n\t\tfont-weight: 600;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\r\n\t.original-price {\r\n\t\tcolor: #999;\r\n\t\tfont-size: 22rpx;\r\n\t\ttext-decoration: line-through;\r\n\t}\r\n\r\n\t.btn-add {\r\n\t\twidth: 48rpx;\r\n\t\theight: 48rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 28rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 8rpx;\r\n\r\n\t\t&:active {\r\n\t\t\ttransform: scale(0.95);\r\n\t\t}\r\n\t}\r\n\r\n\t.add-cart-icon {\r\n\t\twidth: 32rpx;\r\n\t\theight: 32rpx;\r\n\t}\r\n\r\n\t/* 加载状态 */\r\n\t.loading-container {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 60rpx 0;\r\n\t}\r\n\r\n\t.loading-text {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t/* 空状态 */\r\n\t.empty-container {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 120rpx 0;\r\n\t}\r\n\r\n\t.empty-text {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t/* 推荐商品区域 */\r\n\t.recommend-section {\r\n\t\tmargin: 20rpx 12rpx;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\r\n\t.recommend-header {\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.recommend-title {\r\n\t\tposition: relative;\r\n\t\tpadding: 0 20rpx;\r\n\r\n\t\t.title-text {\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tcolor: #333;\r\n\t\t}\r\n\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tcontent: '';\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 50%;\r\n\t\t\twidth: 30rpx;\r\n\t\t\theight: 2rpx;\r\n\t\t\tbackground: linear-gradient(90deg, #07c160, #00b377);\r\n\t\t}\r\n\r\n\t\t&::before {\r\n\t\t\tleft: -40rpx;\r\n\t\t}\r\n\r\n\t\t&::after {\r\n\t\t\tright: -40rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.recommend-grid {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(2, 1fr);\r\n\t\tgap: 16rpx;\r\n\t}\r\n\r\n\t.recommend-item {\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 8rpx;\r\n\t\toverflow: hidden;\r\n\t\tborder: 1rpx solid #f0f0f0;\r\n\t\ttransition: all 0.2s ease;\r\n\r\n\t\t&:active {\r\n\t\t\ttransform: scale(0.98);\r\n\t\t}\r\n\t}\r\n\r\n\t.recommend-thumb {\r\n\t\tposition: relative;\r\n\t\theight: 160rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.recommend-image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tobject-fit: cover;\r\n\t}\r\n\r\n\t.recommend-badge {\r\n\t\tposition: absolute;\r\n\t\ttop: 8rpx;\r\n\t\tleft: 8rpx;\r\n\t\tbackground: #FF6B35;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 18rpx;\r\n\t\tpadding: 4rpx 8rpx;\r\n\t\tborder-radius: 6rpx;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.recommend-info {\r\n\t\tpadding: 12rpx;\r\n\t}\r\n\r\n\t.recommend-name {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #333;\r\n\t\tline-height: 1.3;\r\n\t\tmargin-bottom: 8rpx;\r\n\t\tdisplay: -webkit-box;\r\n\t\t-webkit-line-clamp: 2;\r\n\t\t-webkit-box-orient: vertical;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.recommend-price-row {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\r\n\t.recommend-price {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #e54d42;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.recommend-original {\r\n\t\tfont-size: 20rpx;\r\n\t\tcolor: #999;\r\n\t\ttext-decoration: line-through;\r\n\t}\r\n\r\n\t/* 骨架屏动画 */\r\n\t@keyframes skeleton-loading {\r\n\t\t0% {\r\n\t\t\tbackground-position: 200% 0;\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\tbackground-position: -200% 0;\r\n\t\t}\r\n\t}\r\n\t/* SKU选择弹窗 */\r\n\t.sku-popup {\r\n\t\tpadding: 24rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tmax-height: 80vh;\r\n\t\tmin-height: 400rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 20rpx 20rpx 0 0;\r\n\t}\r\n\t\r\n\t.sku-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 24rpx;\r\n\t\tpadding-bottom: 16rpx;\r\n\t\tborder-bottom: 1rpx solid #e9ecef;\r\n\t}\r\n\t\r\n\t.sku-product-image {\r\n\t\twidth: 120rpx;\r\n\t\theight: 120rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tmargin-right: 16rpx;\r\n\t}\r\n\t\r\n\t.sku-product-info {\r\n\t\tflex: 1;\r\n\t}\r\n\t\r\n\t.sku-product-name {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #333333;\r\n\t\tfont-weight: 700;\r\n\t\tmargin-bottom: 4rpx;\r\n\t}\r\n\t\r\n\t.sku-product-price {\r\n\t\t.sku-price-symbol {\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #009966;\r\n\t\t\tfont-weight: 600;\r\n\t\t}\r\n\t\r\n\t\t.sku-price-value {\r\n\t\t\tfont-size: 40rpx;\r\n\t\t\tcolor: #009966;\r\n\t\t\tfont-weight: 700;\r\n\t\t}\r\n\t}\r\n\t\r\n\t.sku-close {\r\n\t\tpadding: 8rpx;\r\n\t\tborder-radius: 50%;\r\n\t\ttransition: background-color 0.2s ease;\r\n\t}\r\n\t\r\n\t.sku-close:active {\r\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\r\n\t}\r\n\t\r\n\t.sku-options {\r\n\t\tflex: 1;\r\n\t\toverflow-y: auto;\r\n\t\t-webkit-overflow-scrolling: touch;\r\n\t\tpadding-bottom: 20rpx;\r\n\t\tmin-height: 200rpx;\r\n\t}\r\n\t\r\n\t.sku-option-group {\r\n\t\tmargin-bottom: 32rpx;\r\n\t}\r\n\t\r\n\t.option-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 600;\r\n\t\tmargin-bottom: 16rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.option-items {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\t\r\n\t.option-item {\r\n\t\tborder: 2rpx solid #e9ecef;\r\n\t\tborder-radius: 8rpx;\r\n\t\tpadding: 16rpx 20rpx;\r\n\t\tbackground: #fff;\r\n\t\tcursor: pointer;\r\n\t\ttransition: all 0.2s ease;\r\n\t\tmin-width: 80rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\t\r\n\t.option-item.active {\r\n\t\tborder-color: #009966;\r\n\t\tbackground: #f0f9f6;\r\n\t\tcolor: #009966;\r\n\t}\r\n\t\r\n\t.option-item:active {\r\n\t\ttransform: scale(0.95);\r\n\t}\r\n\t\r\n\t.option-content {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tgap: 4rpx;\r\n\t}\r\n\t\r\n\t.option-content text {\r\n\t\tfont-size: 26rpx;\r\n\t\tline-height: 1.2;\r\n\t}\r\n\t\r\n\t.sku-price {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\t\r\n\t.option-item.active .sku-price {\r\n\t\tcolor: #009966;\r\n\t}\r\n\t\r\n\t.quantity-selector {\r\n\t\tmargin-top: 32rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\t\r\n\t.quantity-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\t\r\n\t.quantity-control {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tborder: 2rpx solid #e9ecef;\r\n\t\tborder-radius: 8rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t\r\n\t.quantity-btn {\r\n\t\twidth: 64rpx;\r\n\t\theight: 64rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbackground: #f8f9fa;\r\n\t\tcursor: pointer;\r\n\t\ttransition: background-color 0.2s ease;\r\n\t}\r\n\t\r\n\t.quantity-btn:active {\r\n\t\tbackground: #e9ecef;\r\n\t}\r\n\t\r\n\t.quantity-value {\r\n\t\twidth: 80rpx;\r\n\t\theight: 64rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 600;\r\n\t\tbackground: #fff;\r\n\t\tborder-left: 2rpx solid #e9ecef;\r\n\t\tborder-right: 2rpx solid #e9ecef;\r\n\t}\r\n\t\r\n\t.sku-footer {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding-top: 24rpx;\r\n\t\tborder-top: 2rpx solid #e9ecef;\r\n\t\tmargin-top: 24rpx;\r\n\t}\r\n\t\r\n\t.sku-total {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\t\r\n\t.sku-total text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\t\r\n\t.total-price {\r\n\t\tfont-size: 36rpx;\r\n\t\tcolor: #009966;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\t\r\n\t.sku-action {\r\n\t\tbackground: linear-gradient(135deg, #009966, #00b377);\r\n\t\tcolor: #fff;\r\n\t\tpadding: 24rpx 48rpx;\r\n\t\tborder-radius: 48rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcursor: pointer;\r\n\t\ttransition: all 0.2s ease;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 153, 102, 0.3);\r\n\t}\r\n\t\r\n\t.sku-action:active {\r\n\t\ttransform: scale(0.95);\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 153, 102, 0.3);\r\n\t}\r\n\t\r\n\t.sku-action text {\r\n\t\tcolor: #fff;\r\n\t}\r\n\t\r\n</style>","import mod from \"-!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./AsView.vue?vue&type=style&index=0&id=7bcda5e6&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./AsView.vue?vue&type=style&index=0&id=7bcda5e6&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1757599655200\n      var cssReload = require(\"D:/HbuilderDevTool/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/AsView/AsView.vue'\ncreatePage(Page)"],"sourceRoot":""}